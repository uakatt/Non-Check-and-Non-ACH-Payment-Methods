Index: financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/fp/businessobject/options/PaymentMethodValuesFinderNonInterdepartmental.java
===================================================================
--- financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/fp/businessobject/options/PaymentMethodValuesFinderNonInterdepartmental.java	(revision 10221)
+++ financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/fp/businessobject/options/PaymentMethodValuesFinderNonInterdepartmental.java	(revision 10222)
@@ -1,44 +0,0 @@
-/*
- * Copyright 2007 The Kuali Foundation
- * 
- * Licensed under the Educational Community License, Version 2.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- * 
- * http://www.opensource.org/licenses/ecl2.php
- * 
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package edu.arizona.kfs.fp.businessobject.options;
-
-import java.util.ArrayList;
-import java.util.Collection;
-import java.util.HashMap;
-import java.util.List;
-import java.util.Map;
-
-import org.kuali.kfs.sys.context.SpringContext;
-import org.kuali.rice.core.util.KeyLabelPair;
-import org.kuali.rice.kns.lookup.keyvalues.KeyValuesBase;
-import org.kuali.rice.kns.service.BusinessObjectService;
-
-import edu.arizona.kfs.fp.businessobject.PaymentMethod;
-
-/**
- * This class returns list of payment method key value pairs.
- * 
- * Customization for UA: addition of "A" type for credit card payments.
- * 
- * @author jonathan
- * @see org.kuali.kfs.fp.businessobject.options.PaymentMethodValuesFinder
- */
-public class PaymentMethodValuesFinderNonInterdepartmental extends PaymentMethodValuesFinder {
-    static {
-        filterCriteria.put("interdepartmentalPayment", "N");
-    }
-    
-}
Index: financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/fp/businessobject/options/PaymentMethodsForDVValuesFinder.java
===================================================================
--- financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/fp/businessobject/options/PaymentMethodsForDVValuesFinder.java	(revision 0)
+++ financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/fp/businessobject/options/PaymentMethodsForDVValuesFinder.java	(revision 10222)
@@ -0,0 +1,44 @@
+/*
+ * Copyright 2007 The Kuali Foundation
+ * 
+ * Licensed under the Educational Community License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ * 
+ * http://www.opensource.org/licenses/ecl2.php
+ * 
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package edu.arizona.kfs.fp.businessobject.options;
+
+import java.util.ArrayList;
+import java.util.Collection;
+import java.util.HashMap;
+import java.util.List;
+import java.util.Map;
+
+import org.kuali.kfs.sys.context.SpringContext;
+import org.kuali.rice.core.util.KeyLabelPair;
+import org.kuali.rice.kns.lookup.keyvalues.KeyValuesBase;
+import org.kuali.rice.kns.service.BusinessObjectService;
+
+import edu.arizona.kfs.fp.businessobject.PaymentMethod;
+
+/**
+ * This class returns list of payment method key value pairs.
+ * 
+ * Customization for UA: addition of "A" type for credit card payments.
+ * 
+ * @author jonathan
+ * @see org.kuali.kfs.fp.businessobject.options.PaymentMethodValuesFinder
+ */
+public class PaymentMethodsForDVValuesFinder extends PaymentMethodValuesFinder {
+    static {
+        filterCriteria.put("interdepartmentalPayment", "N");
+    }
+    
+}
Index: financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/fp/businessobject/datadictionary/PaymentMethod.xml
===================================================================
--- financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/fp/businessobject/datadictionary/PaymentMethod.xml	(revision 10221)
+++ financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/fp/businessobject/datadictionary/PaymentMethod.xml	(revision 10222)
@@ -31,11 +31,13 @@
 	<bean name="PaymentMethodSelectControl" parent="SelectControlDefinition"
 		p:valuesFinderClass="edu.arizona.kfs.fp.businessobject.options.PaymentMethodValuesFinder" p:includeKeyInLabel="true" />
 		
-	<bean name="PaymentMethodNonInterdepartmentalSelectControl" parent="SelectControlDefinition"
-		p:valuesFinderClass="edu.arizona.kfs.fp.businessobject.options.PaymentMethodValuesFinderNonInterdepartmental" p:includeKeyInLabel="true" />
+	<bean name="PaymentMethodsForDVSelectControl" parent="SelectControlDefinition"
+		p:valuesFinderClass="edu.arizona.kfs.fp.businessobject.options.PaymentMethodsForDVValuesFinder" p:includeKeyInLabel="true" />
 
+	<bean name="PaymentMethodsForVendorSelectControl" parent="SelectControlDefinition"
+		p:valuesFinderClass="edu.arizona.kfs.fp.businessobject.options.PaymentMethodsForVendorValuesFinder" p:includeKeyInLabel="true" />
+
   <bean id="PaymentMethodAttribute-SelectControl" parent="PaymentMethod-paymentMethodCode" p:control-ref="PaymentMethodSelectControl" />
-  <bean id="PaymentMethodAttribute-NonInterdepartmentalSelectControl" parent="PaymentMethod-paymentMethodCode" p:control-ref="PaymentMethodSelectControl" />
 
   <bean id="PaymentMethod-paymentMethodCode" parent="PaymentMethod-paymentMethodCode-parentBean"/>
   <bean id="PaymentMethod-paymentMethodCode-parentBean" abstract="true" parent="AttributeDefinition">
Index: financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/fp/document/datadictionary/DisbursementVoucherDocument.xml
===================================================================
--- financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/fp/document/datadictionary/DisbursementVoucherDocument.xml	(revision 10221)
+++ financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/fp/document/datadictionary/DisbursementVoucherDocument.xml	(revision 10222)
@@ -19,7 +19,7 @@
 		MOD-PA2000-01: Redefine the payment method attribute to use the new control. 
 	 -->
 	<bean id="DisbursementVoucherDocument-disbVchrPaymentMethodCode" parent="DisbursementVoucherDocument-disbVchrPaymentMethodCode-parentBean">
-		<property name="control" ref="PaymentMethodNonInterdepartmentalSelectControl" />
+		<property name="control" ref="PaymentMethodsForDVSelectControl" />
 	</bean>
   
     <!-- bank code is now optional -->
Index: financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/module/purap/service/impl/UaElectronicInvoiceHelperServiceImpl.java
===================================================================
--- financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/module/purap/service/impl/UaElectronicInvoiceHelperServiceImpl.java	(revision 10221)
+++ financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/module/purap/service/impl/UaElectronicInvoiceHelperServiceImpl.java	(revision 10222)
@@ -17,6 +17,7 @@
 
 import java.util.HashMap;
 
+import org.apache.commons.lang.StringUtils;
 import org.apache.log4j.Logger;
 import org.kuali.kfs.module.purap.PurapConstants;
 import org.kuali.kfs.module.purap.businessobject.ElectronicInvoiceRejectReason;
@@ -44,12 +45,12 @@
 import org.kuali.rice.kns.util.KualiDecimal;
 
 import edu.arizona.kfs.fp.service.UaPaymentMethodGeneralLedgerPendingEntryService;
-import edu.arizona.kfs.module.purap.businessobject.UaElectronicInvoiceDetailRequestHeader;
 import edu.arizona.kfs.module.purap.document.UaPaymentRequestDocument;
+import edu.arizona.kfs.vnd.businessobject.VendorDetailExtension;
 
 public class UaElectronicInvoiceHelperServiceImpl extends ElectronicInvoiceHelperServiceImpl {
     protected static final String DEFAULT_EINVOICE_PAYMENT_METHOD_CODE = "H";
-    private static final Logger LOG = Logger.getLogger(ElectronicInvoiceHelperServiceImpl.class);
+    protected static final Logger LOG = Logger.getLogger(ElectronicInvoiceHelperServiceImpl.class);
 
     @Override
     protected PaymentRequestDocument createPaymentRequest(ElectronicInvoiceOrderHolder orderHolder) {
@@ -105,17 +106,16 @@
             preqDoc.setAccountsPayablePurchasingDocumentLinkIdentifier(orderHolder.getAccountsPayablePurchasingDocumentLinkIdentifier());
         }
         
-        // KITT-592 - updated to copy the payment method code from the holder classes
+        // KITT-592 - updated to copy the payment method code from vendor detail
         // and default the bank in based on that
         boolean hasPaymentMethodCode = false;
         if ( preqDoc instanceof UaPaymentRequestDocument ) {
-            if ( orderHolder.getElectronicInvoice().getInvoiceDetailRequestHeader() instanceof UaElectronicInvoiceDetailRequestHeader ) {
-                String paymentMethodCode = ((UaElectronicInvoiceDetailRequestHeader)orderHolder.getElectronicInvoice().getInvoiceDetailRequestHeader()).getPaymentMethodCode();
-                if ( paymentMethodCode == null ) {
-                    paymentMethodCode = DEFAULT_EINVOICE_PAYMENT_METHOD_CODE;
-                }
-                ((UaPaymentRequestDocument)preqDoc).setPaymentMethodCode(paymentMethodCode);
+            String vendorPaymentMethodCode = ((VendorDetailExtension)poDoc.getVendorDetail().getExtension()).getDefaultB2BPaymentMethodCode();
+            if ( StringUtils.isNotEmpty(vendorPaymentMethodCode) ) { 
+                ((UaPaymentRequestDocument)preqDoc).setPaymentMethodCode(vendorPaymentMethodCode);
                 hasPaymentMethodCode = true;
+            } else {
+                ((UaPaymentRequestDocument)preqDoc).setPaymentMethodCode(DEFAULT_EINVOICE_PAYMENT_METHOD_CODE);
             }
         }
         Bank defaultBank = null;
Index: financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/module/purap/batch/electronicInvoiceDigesterRules.xml
===================================================================
--- financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/module/purap/batch/electronicInvoiceDigesterRules.xml	(revision 10221)
+++ financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/module/purap/batch/electronicInvoiceDigesterRules.xml	(revision 10222)
@@ -1,662 +0,0 @@
-<?xml version="1.0"?>
-<!--
- Copyright 2007-2008 The Kuali Foundation
- 
- Licensed under the Educational Community License, Version 2.0 (the "License");
- you may not use this file except in compliance with the License.
- You may obtain a copy of the License at
- 
- http://www.opensource.org/licenses/ecl2.php
- 
- Unless required by applicable law or agreed to in writing, software
- distributed under the License is distributed on an "AS IS" BASIS,
- WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- See the License for the specific language governing permissions and
- limitations under the License.
--->
-<!DOCTYPE digester-rules 
-    PUBLIC "-//Jakarta Apache //DTD digester-rules XML V1.0//EN" 
-    "http://jakarta.apache.org/commons/digester/dtds/digester-rules.dtd">
-
-<digester-rules>
-
-    <pattern value="cXML">
-        <object-create-rule classname="org.kuali.kfs.module.purap.businessobject.ElectronicInvoice" />
-		
-		<set-properties-rule>
-      		<alias attr-name="version" prop-name="version" />
-      		<alias attr-name="timestamp" prop-name="timestamp" />
-      		<alias attr-name="payloadID" prop-name="payloadID" />
-      		<alias attr-name="xml:lang" prop-name="locale" />
-	    </set-properties-rule>
-	   
-	   <!-- HEADER -->
-	   <pattern value="Header">
-		    <object-create-rule classname="org.kuali.kfs.module.purap.util.cxml.CxmlHeader" />
-		    
-		    <!-- FROM -->
-		    <set-properties-rule pattern="From/Credential">
-			   <alias attr-name="domain" prop-name="fromDomain" />
-		    </set-properties-rule>
-		    
-		    <call-method-rule pattern="From/Credential/Identity" methodname="setFromIdentity" paramcount="0" />
-		    <call-method-rule pattern="From/Credential/SharedSecret" methodname="setFromSharedSecret" paramcount="0" />
-		    
-		    <!-- TO -->
-		    <set-properties-rule pattern="To/Credential">
-			   <alias attr-name="domain" prop-name="toDomain" />
-		    </set-properties-rule>
-		    
-		    <call-method-rule pattern="To/Credential/Identity" methodname="setToIdentity" paramcount="0" />
- 		    <call-method-rule pattern="To/Credential/SharedSecret" methodname="setToSharedSecret" paramcount="0" />
- 		    
-		   <!-- SENDER -->
-		   <set-properties-rule pattern="Sender/Credential">
-			   <alias attr-name="domain" prop-name="senderDomain" />
-		   </set-properties-rule>
-		    
-		   <call-method-rule pattern="Sender/Credential/Identity" methodname="setSenderIdentity" paramcount="0" />
-		   <call-method-rule pattern="Sender/Credential/SharedSecret" methodname="setSenderSharedSecret" paramcount="0" />
-		   <call-method-rule pattern="Sender/UserAgent" methodname="setSenderUserAgent" paramcount="0" />
-		    
-		   <set-next-rule methodname="setCxmlHeader" />
-		    
-	   </pattern> <!-- Header -->
-	   
-	   <!-- REQUEST -->
-	   <pattern value="Request">
-	   		<set-properties-rule>
-			   <alias attr-name="deploymentMode" prop-name="deploymentMode"/>
-		   </set-properties-rule>
-	   </pattern>
-	   
-	   <pattern value="Request/InvoiceDetailRequest/InvoiceDetailRequestHeader">
-	   
-		   <object-create-rule classname="edu.arizona.kfs.module.purap.businessobject.UaElectronicInvoiceDetailRequestHeader" />
-		   
-	   		<set-properties-rule>
-	      		<alias attr-name="invoiceID" prop-name="invoiceId"/>
-	      		<alias attr-name="purpose" prop-name="purpose"/>
-	      		<alias attr-name="operation" prop-name="operation"/>
-	      		<alias attr-name="invoiceDate" prop-name="invoiceDateString"/>
-	      		<alias attr-name="isInformationOnly" prop-name="buyerInformationOnlyIndicator"/>
-	      		<alias attr-name="paymentMethodCode" prop-name="paymentMethodCode"/>
-		    </set-properties-rule>
-		    
-		    <pattern value="InvoiceDetailHeaderIndicator">
-			    <set-properties-rule>
-		      		<alias attr-name="isHeaderInvoice" prop-name="headerInvoiceInd"/>
-			    </set-properties-rule>
-		    </pattern>
-		    
-		    <pattern value="InvoiceDetailLineIndicator">
-			    <set-properties-rule>
-				    <alias attr-name="isTaxInLine" prop-name="taxInfoProvidedIndicator"/>
-		      		<alias attr-name="isSpecialHandlingInLine" prop-name="specialHandlingInfoProvidedIndicator"/>
-		      		<alias attr-name="isShippingInLine" prop-name="shippingInfoProvidedIndicator"/>
-		      		<alias attr-name="isDiscountInLine" prop-name="discountInfoProvidedIndicator"/>
-		      		<alias attr-name="isAccountingInLine" prop-name="accountingInfoProvidedIndicator"/>
-			    </set-properties-rule>
-		    </pattern>
-		    
-	   		<!-- INVOICE PARTNER -->
-	   		<pattern value="InvoicePartner">
-	   			<set-properties-rule pattern="IdReference">
-		      		<alias attr-name="domain" prop-name="idReferenceDomain" />
-		      		<alias attr-name="identifier" prop-name="idReferenceIdentifier" />
-	      		</set-properties-rule>
-
-	      		<call-method-rule pattern="IdReference/Creator" methodname="setIdReferenceCreator" paramcount="0" />
-	      		<call-method-rule pattern="IdReference/Description" methodname="setIdReferenceDescription" paramcount="0" />
-	      		
-	      		<pattern value="Contact">
-
-		      		<object-create-rule classname="org.kuali.kfs.module.purap.businessobject.ElectronicInvoiceContact" />
-
-		      		<set-properties-rule>
-			      		<alias attr-name="role" prop-name="role" />
-			      		<alias attr-name="addressID" prop-name="addressID" />
-		      		</set-properties-rule>
-
-					<call-method-rule pattern="Name" methodname="setName" paramcount="0" />			      		
-					
-	      			<pattern value="PostalAddress">
-	      			
-	      				<object-create-rule classname="org.kuali.kfs.module.purap.businessobject.ElectronicInvoicePostalAddress" />
-	      				
-	      				<set-properties-rule>
-			      			<alias attr-name="name" prop-name="type" />
-		      			</set-properties-rule>
-		      		
-	      				<call-method-rule pattern="DeliverTo" methodname="addName" paramcount="0" />
-	      				
-	      				<!-- Have to find a better way of handling this element -->
-	      				<call-method-rule pattern="Street" methodname="addStreet" paramcount="0" />
-	      				
-	      				<call-method-rule pattern="City" methodname="setCityName" paramcount="0" />
-	      				<call-method-rule pattern="State" methodname="setStateCode" paramcount="0" />
-	      				<call-method-rule pattern="PostalCode" methodname="setPostalCode" paramcount="0" />
-	      				<call-method-rule pattern="Country" methodname="setCountryName" paramcount="0" />
-	      				
-	      				<pattern value="Country">
-	      					<set-properties-rule>
-				      			<alias attr-name="isoCountryCode" prop-name="countryCode" />
-			      			</set-properties-rule>
-	      				</pattern>
-	      				
-	      				<set-next-rule methodname="addPostalAddress" />
-	      				
-	      			</pattern> <!-- PostalAddress -->
-	      			
-	      			<pattern value="Email">
-	                    <call-method-rule methodname="addEmailAddress" paramcount="2" />
-	                    <call-param-rule attrname="name" paramnumber="0"/>
-	                    <call-param-rule paramnumber="1"/>
-                	</pattern>
-                
-                	<pattern value="Phone">
-	                    <call-method-rule methodname="addPhoneNumber" paramcount="4" />
-	                    <call-param-rule attrname="name" paramnumber="0"/>
-	                    <call-param-rule pattern="TelephoneNumber/CountryCode" paramnumber="1"/>
-	                    <call-param-rule pattern="TelephoneNumber/AreaOrCityCode" paramnumber="2"/>
-	                    <call-param-rule pattern="TelephoneNumber/Number" paramnumber="3"/>
-                	</pattern>
-                	
-                    <pattern value="Fax">
-	                    <call-method-rule methodname="addFaxNumber" paramcount="4" />
-	                    <call-param-rule attrname="name" paramnumber="0"/>
-	                    <call-param-rule pattern="TelephoneNumber/CountryCode" paramnumber="1"/>
-	                    <call-param-rule pattern="TelephoneNumber/AreaOrCityCode" paramnumber="2"/>
-	                    <call-param-rule pattern="TelephoneNumber/Number" paramnumber="3"/>
-                	</pattern>
-                    
-                    <call-method-rule pattern="URL" methodname="addWebAddress" paramcount="0" />
-                    
-	      			<set-next-rule methodname="addInvoicePartnerContact" />
-	      			
-	      		</pattern> <!-- InvoicePartner/Contacts -->
-	      		
-	   		</pattern> <!-- InvoicePartner -->
-	   		
-	   		<!-- SHIPPING DETAILS -->
-	   		<pattern value="InvoiceDetailShipping">
-	   			<set-properties-rule>
-	      			<alias attr-name="shippingDate" prop-name="shippingDateString" />
-      			</set-properties-rule>
-      			
-      			<!-- CONTACTS -->
-	      		<pattern value="Contact">
-      				
-      				<object-create-rule classname="org.kuali.kfs.module.purap.businessobject.ElectronicInvoiceContact" />
-      				
-      				<set-properties-rule>
-			      		<alias attr-name="role" prop-name="role" />
-			      		<alias attr-name="addressID" prop-name="addressID" />
-		      		</set-properties-rule>
-
-					<call-method-rule pattern="Name" methodname="setName" paramcount="0" />			      		
-					
-	      			<pattern value="PostalAddress">
-	      			
-	      				<object-create-rule classname="org.kuali.kfs.module.purap.businessobject.ElectronicInvoicePostalAddress" />
-	      				
-	      				<set-properties-rule>
-			      			<alias attr-name="name" prop-name="type" />
-		      			</set-properties-rule>
-		      		
-	      				<call-method-rule pattern="DeliverTo" methodname="addName" paramcount="0" />
-	      				
-	      				<!-- FIXME: Have to find a better way of handling this element -->
-	      				<call-method-rule pattern="Street" methodname="addStreet" paramcount="0" />
-	      				
-	      				
-	      				<call-method-rule pattern="City" methodname="setCityName" paramcount="0" />
-	      				<call-method-rule pattern="State" methodname="setStateCode" paramcount="0" />
-	      				<call-method-rule pattern="PostalCode" methodname="setPostalCode" paramcount="0" />
-	      				<call-method-rule pattern="Country" methodname="setCountryName" paramcount="0" />
-	      				
-	      				<pattern value="Country">
-	      					<set-properties-rule>
-				      			<alias attr-name="isoCountryCode" prop-name="countryCode" />
-			      			</set-properties-rule>
-	      				</pattern>
-	      				
-	      				<set-next-rule methodname="addPostalAddress" />
-	      				
-	      			</pattern> <!-- PostalAddress -->
-	      			
-	      			<pattern value="Email">
-	                    <call-method-rule methodname="addEmailAddress" paramcount="2" />
-	                    <call-param-rule attrname="name" paramnumber="0"/>
-	                    <call-param-rule paramnumber="1"/>
-                	</pattern>
-                	
-                	<pattern value="Phone">
-	                    <call-method-rule methodname="addPhoneNumber" paramcount="4" />
-	                    <call-param-rule attrname="name" paramnumber="0"/>
-	                    <call-param-rule pattern="TelephoneNumber/CountryCode" paramnumber="1"/>
-	                    <call-param-rule pattern="TelephoneNumber/AreaOrCityCode" paramnumber="2"/>
-	                    <call-param-rule pattern="TelephoneNumber/Number" paramnumber="3"/>
-                	</pattern>
-                	
-                    <pattern value="Fax">
-	                    <call-method-rule methodname="addFaxNumber" paramcount="4" />
-	                    <call-param-rule attrname="name" paramnumber="0"/>
-	                    <call-param-rule pattern="TelephoneNumber/CountryCode" paramnumber="1"/>
-	                    <call-param-rule pattern="TelephoneNumber/AreaOrCityCode" paramnumber="2"/>
-	                    <call-param-rule pattern="TelephoneNumber/Number" paramnumber="3"/>
-                	</pattern>
-                    
-                    <call-method-rule pattern="URL" methodname="addWebAddress" paramcount="0" />
-                    
-	      			<set-next-rule methodname="addInvoiceShippingContacts" />
-	      			
-      			</pattern> <!-- InvoiceDetailShipping/Contact -->
-      			
-      			<!-- INFO: Skipping CarrierIdentifier,ShipmentIdentifier,DocumentReference since these are not handled currently -->
-      			
-	   		</pattern> <!-- InvoiceDetailShipping -->
-	   		
-	   		<!-- The next two elements were not used currently -->
-	   		<set-properties-rule pattern="InvoiceDetailPaymentTerm">
-   				<alias attr-name="payInNumberOfDays" prop-name="payInNumberOfDays" paramtype="java.lang.Integer"/>
-   				<alias attr-name="percentageRate" prop-name="percentageRate"/>
-   			</set-properties-rule>
-   			
-	   		<set-properties-rule pattern="PaymentTerm">
-   				<alias attr-name="payInNumberOfDays" prop-name="payInNumberOfDays" paramtype="java.lang.Integer"/>
-   			</set-properties-rule>
-
-			<!-- INFO: Comments element not handled currently -->    			
-			
-	   		<pattern value="Extrinsic">
-	   			<object-create-rule classname="org.kuali.kfs.module.purap.util.cxml.CxmlExtrinsic" />
-	   			
-	   			<call-method-rule methodname="setValue" paramcount="0" />
-    			<set-properties-rule>
-    				<alias attr-name="name" prop-name="name" />
-    			</set-properties-rule>
-    			
-	   			<set-next-rule methodname="addExtrinsic" />
-	   		</pattern> <!--  Extrinsic -->
-	   		
-	   		<set-next-rule methodname="setInvoiceDetailRequestHeader" />
-		   
-	   </pattern> <!--  Request -->
-		   
-	   <!-- INVOICE ORDER -->
-	   <pattern value="Request/InvoiceDetailRequest/InvoiceDetailOrder">
-	   
-		   <object-create-rule classname="org.kuali.kfs.module.purap.businessobject.ElectronicInvoiceOrder" />
-		   
-		   <set-properties-rule pattern="InvoiceDetailOrderInfo/OrderReference">
-      			<alias attr-name="orderID" prop-name="orderReferenceOrderID" />
-      			<alias attr-name="orderDate" prop-name="orderReferenceOrderDateString" />
-     	   </set-properties-rule>
-     		   
-     	   <set-properties-rule pattern="InvoiceDetailOrderInfo/OrderReference/DocumentReference">
-      			<alias attr-name="payloadID" prop-name="orderReferenceDocumentRefPayloadID" />
-     	   </set-properties-rule>
-     			
-		   <call-method-rule pattern="InvoiceDetailOrderInfo/OrderReference/DocumentReference" methodname="setOrderReferenceDocumentRef" paramcount="0" />
-		   
-		   <set-properties-rule pattern="InvoiceDetailOrderInfo/MasterAgreementReference">
-		  	   <alias attr-name="agreementID" prop-name="masterAgreementReferenceID" />
-     		   <alias attr-name="agreementDate" prop-name="masterAgreementReferenceDateString" />
-    	   </set-properties-rule>
-    		   
-    	   <set-properties-rule pattern="InvoiceDetailOrderInfo/MasterAgreementIDInfo">
-      		   <alias attr-name="agreementID" prop-name="masterAgreementIDInfoID" />
-      		   <alias attr-name="agreementDate" prop-name="masterAgreementIDInfoDateString" />
-   		   </set-properties-rule>
-    		   
-    	   <set-properties-rule pattern="InvoiceDetailOrderInfo/OrderIDInfo">
-    		   <alias attr-name="orderID" prop-name="orderIDInfoID" />
-     		   <alias attr-name="orderDate" prop-name="orderIDInfoDateString" />
-    	   </set-properties-rule>
-    		   
-    	   <set-properties-rule pattern="InvoiceDetailOrderInfo/SupplierOrderInfo">
-    		   <alias attr-name="orderID" prop-name="supplierOrderInfoID" />
-    	   </set-properties-rule>
-     	
-     	
-     	   <!-- INVOICE ITEM -->
-	   	   <pattern value="InvoiceDetailItem">	   
-	   			<object-create-rule classname="org.kuali.kfs.module.purap.businessobject.ElectronicInvoiceItem" />
-	   			
-	   			<set-properties-rule>
-    				<alias attr-name="invoiceLineNumber" prop-name="invoiceLineNumber" />
-     				<alias attr-name="quantity" prop-name="quantity" />
-    			</set-properties-rule>
-    			
-    			<call-method-rule pattern="UnitOfMeasure" methodname="setUnitOfMeasure" paramcount="0" />
-    			
-    			<call-method-rule pattern="UnitPrice/Money" methodname="setUnitPrice" paramcount="0" />
-    			<set-properties-rule pattern="UnitPrice/Money">
-    				<alias attr-name="currency" prop-name="unitPriceCurrency" />
-    			</set-properties-rule>
-    			
-    			<!-- Currently, the element name is SubTotalAmount instead of SubtotalAmount (case problem - total/Total) I think we're not using this element-->
-    			<call-method-rule pattern="SubtotalAmount/Money" methodname="setSubTotalAmount" paramcount="0" />
-    			<set-properties-rule pattern="SubtotalAmount/Money">
-    				<alias attr-name="currency" prop-name="subTotalAmountCurrency" />
-    			</set-properties-rule>
-    			
-    			<call-method-rule pattern="Tax/Money" methodname="setTaxAmount" paramcount="0" />
-    			<set-properties-rule pattern="Tax/Money">
-    				<alias attr-name="currency" prop-name="taxAmountCurrency" />
-    			</set-properties-rule>
-    			
-    			<!-- Parser is just trying to read the value of Tax element and setting it as description. (I think it's not possible....)
-    			But there is a seperate element available for description in xsd/dtd, 
-    			HAVE TO DECIDE BASED ON MORE SAMPLE DATA FILES -->
-    			<call-method-rule pattern="Tax/Description" methodname="setTaxDescription" paramcount="0" />
-    			
-    			<call-method-rule pattern="InvoiceDetailLineSpecialHandling/Money" methodname="setInvoiceLineSpecialHandlingAmount" paramcount="0" />
-    			<set-properties-rule pattern="InvoiceDetailLineSpecialHandling/Money">
-    				<alias attr-name="currency" prop-name="invoiceLineSpecialHandlingAmountCurrency" />
-    			</set-properties-rule>
-    			
-    			<call-method-rule pattern="InvoiceDetailLineShipping/Money" methodname="setInvoiceLineShippingAmount" paramcount="0" />
-    			<set-properties-rule pattern="InvoiceDetailLineShipping/Money">
-    				<alias attr-name="currency" prop-name="invoiceLineShippingAmountCurrency" />
-    			</set-properties-rule>
-    			
-    			<set-properties-rule pattern="InvoiceDetailLineShipping/InvoiceDetailShipping">
-    				<alias attr-name="shippingDate" prop-name="shippingDateString" />
-    			</set-properties-rule>
-    			
-    			<pattern value="InvoiceDetailLineShipping/InvoiceDetailShipping/Contact">
-	
-		      		<object-create-rule classname="org.kuali.kfs.module.purap.businessobject.ElectronicInvoiceContact" />
-
-		      		<set-properties-rule>
-			      		<alias attr-name="role" prop-name="role" />
-			      		<alias attr-name="addressID" prop-name="addressID" />
-		      		</set-properties-rule>
-
-					<call-method-rule pattern="Name" methodname="setName" paramcount="0" />			      		
-					
-	      			<pattern value="PostalAddress">
-	      			
-	      				<object-create-rule classname="org.kuali.kfs.module.purap.businessobject.ElectronicInvoicePostalAddress" />
-	      				
-	      				<set-properties-rule>
-			      			<alias attr-name="name" prop-name="type" />
-		      			</set-properties-rule>
-		      		
-	      				<call-method-rule pattern="DeliverTo" methodname="addName" paramcount="0" />
-	      				
-	      				<!-- Have to find a better way of handling this element -->
-	      				<call-method-rule pattern="Street" methodname="addStreet" paramcount="0" />
-	      				
-	      				
-	      				<call-method-rule pattern="City" methodname="setCityName" paramcount="0" />
-	      				<call-method-rule pattern="State" methodname="setStateCode" paramcount="0" />
-	      				<call-method-rule pattern="PostalCode" methodname="setPostalCode" paramcount="0" />
-	      				<call-method-rule pattern="Country" methodname="setCountryName" paramcount="0" />
-	      				
-	      				<pattern value="Country">
-	      					<set-properties-rule>
-				      			<alias attr-name="isoCountryCode" prop-name="countryCode" />
-			      			</set-properties-rule>
-	      				</pattern>
-	      				
-	      				<set-next-rule methodname="addPostalAddress" />
-	      				
-	      			</pattern> <!-- PostalAddress -->
-	      			
-	      			<pattern value="Email">
-	                    <call-method-rule methodname="addEmailAddress" paramcount="2" />
-	                    <call-param-rule attrname="name" paramnumber="0"/>
-	                    <call-param-rule paramnumber="1"/>
-                	</pattern>
-                
-                	<pattern value="Phone">
-	                    <call-method-rule methodname="addPhoneNumber" paramcount="4" />
-	                    <call-param-rule attrname="name" paramnumber="0"/>
-	                    <call-param-rule pattern="TelephoneNumber/CountryCode" paramnumber="1"/>
-	                    <call-param-rule pattern="TelephoneNumber/AreaOrCityCode" paramnumber="2"/>
-	                    <call-param-rule pattern="TelephoneNumber/Number" paramnumber="3"/>
-                	</pattern>
-                	
-                    <pattern value="Fax">
-	                    <call-method-rule methodname="addFaxNumber" paramcount="4" />
-	                    <call-param-rule attrname="name" paramnumber="0"/>
-	                    <call-param-rule pattern="TelephoneNumber/CountryCode" paramnumber="1"/>
-	                    <call-param-rule pattern="TelephoneNumber/AreaOrCityCode" paramnumber="2"/>
-	                    <call-param-rule pattern="TelephoneNumber/Number" paramnumber="3"/>
-                	</pattern>
-                    
-                    <call-method-rule pattern="URL" methodname="addWebAddress" paramcount="0" />
-                    
-	      			<set-next-rule methodname="addInvoiceShippingContacts" />
-	      			
-	      		</pattern> <!-- InvoiceDetailLineShipping/InvoiceDetailShipping/Contact -->
-		      		
-    			<call-method-rule pattern="GrossAmount/Money" methodname="setInvoiceLineGrossAmount" paramcount="0" />
-    			<set-properties-rule pattern="GrossAmount/Money">
-    				<alias attr-name="currency" prop-name="invoiceLineGrossAmountCurrency" />
-    			</set-properties-rule>
-    			
-    			<call-method-rule pattern="InvoiceDetailDiscount/Money" methodname="setInvoiceLineDiscountAmount" paramcount="0" />
-    			<set-properties-rule pattern="InvoiceDetailDiscount/Money">
-    				<alias attr-name="currency" prop-name="invoiceLineDiscountAmountCurrency" />
-    			</set-properties-rule>
-    			
-    			<!-- Not handled currently, but this is there in Barnes&Noble's xml file,
-    			but contains ZERO!!! -->
-    			<set-properties-rule pattern="Money">
-    				<alias attr-name="percentageRate" prop-name="invoiceLineDiscountPercentageRate" />
-    			</set-properties-rule>
-    			
-    			<call-method-rule pattern="NetAmount/Money" methodname="setInvoiceLineNetAmount" paramcount="0" />
-    			<set-properties-rule pattern="NetAmount/Money">
-    				<alias attr-name="currency" prop-name="invoiceLineNetAmountCurrency" />
-    			</set-properties-rule>
-    			
-    			<call-method-rule pattern="InvoiceDetailItemReference/Country" methodname="setReferenceCountryName" paramcount="0" />
-    			<set-properties-rule pattern="InvoiceDetailItemReference/Country">
-    				<alias attr-name="isoCountryCode" prop-name="referenceCountryCode" />
-    			</set-properties-rule>
-    			
-    			<call-method-rule pattern="InvoiceDetailItemReference/Description" methodname="setReferenceDescription" paramcount="0" />
-    			<call-method-rule pattern="InvoiceDetailItemReference/ItemID/SupplierPartAuxiliaryID" methodname="setReferenceItemIDSupplierPartAuxID" paramcount="0" />
-    			<call-method-rule pattern="InvoiceDetailItemReference/ItemID/SupplierPartID" methodname="setReferenceItemIDSupplierPartID" paramcount="0" />
-    			
-    			<set-properties-rule pattern="InvoiceDetailItemReference">
-    				<alias attr-name="lineNumber" prop-name="referenceLineNumber" />
-     				<alias attr-name="serialNumber" prop-name="referenceSerialNumber" />
-    			</set-properties-rule>
-    			
-    			<call-method-rule pattern="InvoiceDetailItemReference/ManufacturerName" methodname="setReferenceManufacturerName" paramcount="0" />
-    			<call-method-rule pattern="InvoiceDetailItemReference/ManufacturerPartID" methodname="setReferenceManufacturerPartID" paramcount="0" />
-    			
-    			<call-method-rule pattern="InvoiceDetailItemReference/SerialNumber" methodname="addReferenceSerialNumber" paramcount="0" />
-    			
-    			<call-method-rule pattern="Comments" methodname="addComments" paramcount="0" />
-    			
-    			<pattern value="Extrinsic">
-		   			<object-create-rule classname="org.kuali.kfs.module.purap.util.cxml.CxmlExtrinsic" />
-		   			
-		   			<call-method-rule methodname="setValue" paramcount="0" />
-	    			<set-properties-rule>
-	    				<alias attr-name="name" prop-name="name" />
-	    			</set-properties-rule>
-	    			
-		   			<set-next-rule methodname="addExtrinsic" />
-	   			</pattern> <!--  Extrinsic -->
-    			
-		   		<set-next-rule methodname="addInvoiceItem" />
-		   		
-		   </pattern> 	<!-- InvoiceDetailItem -->  
-		   
-		   <!-- InvoiceDetailServiceItem -->
-	   	   <pattern value="InvoiceDetailServiceItem">	   
-	   			<object-create-rule classname="org.kuali.kfs.module.purap.businessobject.ElectronicInvoiceItem" />
-	   			
-	   			<set-properties-rule>
-    				<alias attr-name="invoiceLineNumber" prop-name="invoiceLineNumber" />
-     				<alias attr-name="quantity" prop-name="quantity" />
-    			</set-properties-rule>
-    			
-    			<call-method-rule pattern="UnitOfMeasure" methodname="setUnitOfMeasure" paramcount="0" />
-    			
-    			<call-method-rule pattern="UnitPrice/Money" methodname="setUnitPrice" paramcount="0" />
-    			<set-properties-rule pattern="UnitPrice/Money">
-    				<alias attr-name="currency" prop-name="unitPriceCurrency" />
-    			</set-properties-rule>
-    			
-    			<!--  FIXME : These two values should be set only if UnitPrice not available. Have to do some R&D -->
-    			<call-method-rule pattern="UnitRate/UnitOfMeasure" methodname="setUnitOfMeasure" paramcount="0" />
-    			<call-method-rule pattern="UnitRate/Money" methodname="setUnitPrice" paramcount="0" />
-    			
-    			<!-- This is not handled currently, but it is needed if there is no UnitPrice/Money element-->
-    			<set-properties-rule pattern="UnitRate/Money">
-    				<alias attr-name="currency" prop-name="unitPriceCurrency" />
-    			</set-properties-rule>
-    			
-    			<!-- In parser, the element name is SubTotalAmount instead of SubtotalAmount (case problem - total/Total)
-    			I think we're not using this element-->
-    			<call-method-rule pattern="SubtotalAmount/Money" methodname="setSubTotalAmount" paramcount="0" />
-    			<set-properties-rule pattern="SubtotalAmount/Money">
-    				<alias attr-name="currency" prop-name="subTotalAmountCurrency" />
-    			</set-properties-rule>
-    			
-    			<call-method-rule pattern="Tax/Money" methodname="setTaxAmount" paramcount="0" />
-    			<set-properties-rule pattern="Tax/Money">
-    				<alias attr-name="currency" prop-name="taxAmountCurrency" />
-    			</set-properties-rule>
-    			
-    			<!-- Parser is just trying to read the value of Tax element and setting it as description. (I think it's not possible....)
-    			But there is a seperate element available for description in xsd/dtd, 
-    			HAVE TO DECIDE BASED ON MORE SAMPLE DATA FILES -->
-    			<call-method-rule pattern="Tax/Description" methodname="setTaxDescription" paramcount="0" />
-    			
-    			<call-method-rule pattern="GrossAmount/Money" methodname="setInvoiceLineGrossAmount" paramcount="0" />
-    			<set-properties-rule pattern="GrossAmount/Money">
-    				<alias attr-name="currency" prop-name="invoiceLineGrossAmountCurrency" />
-    			</set-properties-rule>
-    			
-    			<call-method-rule pattern="InvoiceDetailDiscount/Money" methodname="setInvoiceLineDiscountAmount" paramcount="0" />
-    			<set-properties-rule pattern="InvoiceDetailDiscount/Money">
-    				<alias attr-name="currency" prop-name="invoiceLineDiscountAmountCurrency" />
-    			</set-properties-rule>
-    			
-    			<!-- Not handled currently, but this is there in Barnes&Noble's xml file,
-    			but contains ZERO!!! -->
-    			<set-properties-rule pattern="Money">
-    				<alias attr-name="percentageRate" prop-name="invoiceLineDiscountPercentageRate" />
-    			</set-properties-rule>
-    			
-    			<call-method-rule pattern="NetAmount/Money" methodname="setInvoiceLineNetAmount" paramcount="0" />
-    			<set-properties-rule pattern="NetAmount/Money">
-    				<alias attr-name="currency" prop-name="invoiceLineNetAmountCurrency" />
-    			</set-properties-rule>
-    			
-    			<call-method-rule pattern="InvoiceDetailServiceItemReference/Description" methodname="setReferenceDescription" paramcount="0" />
-    			<call-method-rule pattern="InvoiceDetailServiceItemReference/ItemID/SupplierPartAuxiliaryID" methodname="setReferenceItemIDSupplierPartAuxID" paramcount="0" />
-    			<call-method-rule pattern="InvoiceDetailServiceItemReference/ItemID/SupplierPartID" methodname="setReferenceItemIDSupplierPartID" paramcount="0" />
-    			
-    			<set-properties-rule pattern="InvoiceDetailServiceItemReference">
-    				<alias attr-name="lineNumber" prop-name="referenceLineNumber" />
-    			</set-properties-rule>
-
-	   			<call-method-rule pattern="Comments" methodname="addComments" paramcount="0" />
-	   			    			
-    			<pattern value="Extrinsic">
-		   			<object-create-rule classname="org.kuali.kfs.module.purap.util.cxml.CxmlExtrinsic" />
-		   			
-		   			<call-method-rule methodname="setValue" paramcount="0" />
-	    			<set-properties-rule>
-	    				<alias attr-name="name" prop-name="name" />
-	    			</set-properties-rule>
-	    			
-		   			<set-next-rule methodname="addExtrinsic" />
-	   			</pattern> <!--  Extrinsic -->
-	   			
-		   		<set-next-rule methodname="addInvoiceItem" />
-		   		
-		   </pattern> 	<!-- InvoiceDetailServiceItem --> 
-	   
-     	   <set-next-rule methodname="addInvoiceDetailOrder" />
-     		   
-	   </pattern> <!-- Request/InvoiceDetailRequest/InvoiceDetailOrder -->
-	   
-	    <!-- InvoiceDetailSummary -->
-	   <pattern value="Request/InvoiceDetailRequest/InvoiceDetailSummary">
-		   <object-create-rule classname="org.kuali.kfs.module.purap.businessobject.ElectronicInvoiceDetailRequestSummary" />
-		   
-		   <call-method-rule pattern="Tax/Money" methodname="setTaxAmount" paramcount="0" />
-   		   <set-properties-rule pattern="Tax/Money">
-   				<alias attr-name="currency" prop-name="taxAmountCurrency" />
-   	   	   </set-properties-rule>
-		   
-		   <call-method-rule pattern="Tax/Description" methodname="setTaxDescription" paramcount="0" />
-		   
-		   <!-- FIXME: If the above desc is empty, have to get the desc from TaxDetail... Have to do this check-->
-		   <call-method-rule pattern="Tax/TaxDetail/Description" methodname="setTaxDescription" paramcount="0" />
-		   
-		   <set-properties-rule pattern="Tax/TaxDetail">
-   				<alias attr-name="category" prop-name="taxCategory" />
-   				<alias attr-name="purpose" prop-name="taxPurpose" />
-   				<alias attr-name="percentageRate" prop-name="taxPercentageRate" />
-   	   	   </set-properties-rule>
-   	   	   
-		   <call-method-rule pattern="SpecialHandlingAmount/Money" methodname="setSpecialHandlingAmount" paramcount="0" />
-   		   <set-properties-rule pattern="SpecialHandlingAmount/Money">
-   				<alias attr-name="currency" prop-name="specialHandlingAmountCurrency" />
-   	   	   </set-properties-rule>
-		   
-		   <call-method-rule pattern="SpecialHandlingAmount/Description" methodname="setSpecialHandlingAmountDescription" paramcount="0" />
-		   
-		   <!-- In parser, the element name is SubTotalAmount instead of SubtotalAmount (case problem - total/Total)
-   			I think we're not using this element-->
-   			<call-method-rule pattern="SubtotalAmount/Money" methodname="setSubTotalAmount" paramcount="0" />
-   			<set-properties-rule pattern="SubtotalAmount/Money">
-   				<alias attr-name="currency" prop-name="subTotalAmountCurrency" />
-   			</set-properties-rule>
-		   
-		    <call-method-rule pattern="ShippingAmount/Money" methodname="setShippingAmount" paramcount="0" />
-   			<set-properties-rule pattern="ShippingAmount/Money">
-   				<alias attr-name="currency" prop-name="shippingAmountCurrency" />
-   			</set-properties-rule>
-		   
-		    <call-method-rule pattern="GrossAmount/Money" methodname="setGrossAmount" paramcount="0" />
-    		<set-properties-rule pattern="GrossAmount/Money">
-    			<alias attr-name="currency" prop-name="grossAmountCurrency" />
-    		</set-properties-rule>
-		   
-		    <call-method-rule pattern="InvoiceDetailDiscount/Money" methodname="setDiscountAmount" paramcount="0" />
-    		<set-properties-rule pattern="InvoiceDetailDiscount/Money">
-    			<alias attr-name="currency" prop-name="discountAmountCurrency" />
-    		</set-properties-rule>
-		   
-		    <!-- Not handled currently, but this is there in Barnes&Noble's xml file,
-    			 but contains ZERO!!! -->
-    		<set-properties-rule pattern="Money">
-    			<alias attr-name="percentageRate" prop-name="invoiceLineDiscountPercentageRate" />
-    		</set-properties-rule>
-    			
-		    <call-method-rule pattern="NetAmount/Money" methodname="setNetAmount" paramcount="0" />
-    		<set-properties-rule pattern="NetAmount/Money">
-    			<alias attr-name="currency" prop-name="netAmountCurrency" />
-    		</set-properties-rule>
-    		
-    		<call-method-rule pattern="DepositAmount/Money" methodname="setDepositAmount" paramcount="0" />
-    		<set-properties-rule pattern="DepositAmount/Money">
-    			<alias attr-name="currency" prop-name="depositAmountCurrency" />
-    		</set-properties-rule>
-    		
-    		<call-method-rule pattern="DueAmount/Money" methodname="setDueAmount" paramcount="0" />
-    		<set-properties-rule pattern="DueAmount/Money">
-    			<alias attr-name="currency" prop-name="dueAmountCurrency" />
-    		</set-properties-rule>
-		   
-		   <set-next-rule methodname="setInvoiceDetailRequestSummary" />
-		   
-	   </pattern> <!-- Request/InvoiceDetailRequest/InvoiceDetailSummary -->
-		
-    </pattern> <!-- cXML -->
-    
-</digester-rules>
Index: financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/module/purap/businessobject/UaElectronicInvoiceDetailRequestHeader.java
===================================================================
--- financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/module/purap/businessobject/UaElectronicInvoiceDetailRequestHeader.java	(revision 10221)
+++ financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/module/purap/businessobject/UaElectronicInvoiceDetailRequestHeader.java	(revision 10222)
@@ -1,31 +0,0 @@
-/*
- * Copyright 2010 The Kuali Foundation.
- * 
- * Licensed under the Educational Community License, Version 1.0 (the "License");
- * you may not use this file except in compliance with the License.
- * You may obtain a copy of the License at
- * 
- * http://www.opensource.org/licenses/ecl1.php
- * 
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package edu.arizona.kfs.module.purap.businessobject;
-
-import org.kuali.kfs.module.purap.businessobject.ElectronicInvoiceDetailRequestHeader;
-
-public class UaElectronicInvoiceDetailRequestHeader extends ElectronicInvoiceDetailRequestHeader {
-
-    private String paymentMethodCode;
-
-    public String getPaymentMethodCode() {
-        return paymentMethodCode;
-    }
-
-    public void setPaymentMethodCode(String paymentMethodCode) {
-        this.paymentMethodCode = paymentMethodCode;
-    }
-}
Index: financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/vnd/businessobject/datadictionary/VendorDetailExtension.xml
===================================================================
--- financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/vnd/businessobject/datadictionary/VendorDetailExtension.xml	(revision 10221)
+++ financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/vnd/businessobject/datadictionary/VendorDetailExtension.xml	(revision 10222)
@@ -19,6 +19,7 @@
 				<ref bean="VendorDetailExtension-tucSalesTaxLicense" />
 				<ref bean="VendorDetailExtension-vendorHeaderGeneratedIdentifier" />
 				<ref bean="VendorDetailExtension-vendorDetailAssignedIdentifier" />
+				<ref bean="VendorDetailExtension-defaultB2BPaymentMethodCode" />
 
 			</list>
 		</property>
@@ -71,6 +72,15 @@
 		</property>
 	</bean>
 
+	<bean id="VendorDetailExtension-defaultB2BPaymentMethodCode" parent="VendorDetailExtension-defaultB2BPaymentMethodCode-parentBean" />
+	<bean id="VendorDetailExtension-defaultB2BPaymentMethodCode-parentBean" abstract="true"
+		parent="PaymentMethod-paymentMethodCode">
+		<property name="name" value="defaultB2BPaymentMethodCode" />
+		<property name="label" value="Default B2B Payment Method" />
+		<property name="shortLabel" value="Dflt B2B Pmt Mthd" />
+		<property name="control" ref="PaymentMethodsForVendorSelectControl" />
+	</bean>
+
 	<bean id="VendorDetailExtension-versionNumber" parent="AttributeReferenceDummy-versionNumber-parentBean" />
 
 </beans>
Index: financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/vnd/businessobject/VendorDetailExtension.java
===================================================================
--- financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/vnd/businessobject/VendorDetailExtension.java	(revision 10221)
+++ financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/vnd/businessobject/VendorDetailExtension.java	(revision 10222)
@@ -37,7 +37,10 @@
 	private Integer     vendorHeaderGeneratedIdentifier;        //Foreign Key Attribute   
     private String      azSalesTaxLicense;
     private String      tucSalesTaxLicense;
-
+    // MOD-PA2000-01
+    protected String    defaultB2BPaymentMethodCode;
+    // END MOD
+    
     /**
      * @return vendorHeaderGeneratedIdentifier
      */
@@ -120,7 +123,10 @@
             return new EqualsBuilder().append(
                     this.getConflictOfInterest(), extension.getConflictOfInterest()).append(
                     this.getAzSalesTaxLicense(), extension.getAzSalesTaxLicense()).append(
-                    this.getTucSalesTaxLicense(), extension.getTucSalesTaxLicense()).isEquals();
+                    this.getTucSalesTaxLicense(), extension.getTucSalesTaxLicense()).append(
+                    // MOD-PA2000-01
+                    this.getDefaultB2BPaymentMethodCode(), extension.getDefaultB2BPaymentMethodCode()).isEquals();
+                    // END MOD
         }        
     }
     
@@ -130,4 +136,14 @@
         m.put("vendorHeaderGeneratedIdentifier", getVendorHeaderGeneratedIdentifier());
         return m;
     }
+
+    // MOD-PA2000-01
+    public String getDefaultB2BPaymentMethodCode() {
+        return defaultB2BPaymentMethodCode;
+    }
+
+    public void setDefaultB2BPaymentMethodCode(String defaultB2BPaymentMethodCode) {
+        this.defaultB2BPaymentMethodCode = defaultB2BPaymentMethodCode;
+    }
+    // END MOD
 }
Index: financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/vnd/document/datadictionary/VendorMaintenanceDocument.xml
===================================================================
--- financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/vnd/document/datadictionary/VendorMaintenanceDocument.xml	(revision 10221)
+++ financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/vnd/document/datadictionary/VendorMaintenanceDocument.xml	(revision 10222)
@@ -20,6 +20,7 @@
 		<property name="maintainableItems">
 			<list merge="true">
 				<bean parent="MaintainableFieldDefinition" p:name="extension.conflictOfInterest" p:required="true"/>
+				<bean parent="MaintainableFieldDefinition" p:name="extension.defaultB2BPaymentMethodCode" p:required="true" />
 			</list>
 		</property>
 	</bean>
Index: financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/vnd/ojb-vnd.xml
===================================================================
--- financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/vnd/ojb-vnd.xml	(revision 10221)
+++ financial-system/kfs/branches/mod-jhkeller/pa2000-01/work/src/edu/arizona/kfs/vnd/ojb-vnd.xml	(revision 10222)
@@ -9,6 +9,9 @@
 	<field-descriptor name="azSalesTaxLicense" column="AZ_SALES_TAX_LIC" jdbc-type="VARCHAR" />
 	<field-descriptor name="tucSalesTaxLicense" column="TUC_SALES_TAX_LIC" jdbc-type="VARCHAR" />
     <field-descriptor name="conflictOfInterest" column="VNDR_CONFLICT_OF_INT" jdbc-type="VARCHAR" />
+    <!--  MOD-PA2000-01 -->
+    <field-descriptor name="defaultB2BPaymentMethodCode" column="DFLT_B2B_PMT_MTHD_CD" jdbc-type="VARCHAR" />
+    <!--  END MOD -->
 </class-descriptor>
 
 
